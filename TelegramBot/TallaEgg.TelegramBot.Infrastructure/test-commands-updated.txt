# Ø¯Ø³ØªÙˆØ±Ø§Øª PowerShell Ø¨Ø±Ø§ÛŒ ØªØ³Øª API Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ ØªØ·Ø¨ÛŒÙ‚ Ù…Ø¹Ø§Ù…Ù„Ù‡ (Ù†Ø³Ø®Ù‡ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡)
# PowerShell Commands for Testing Trade Match Notification API (Corrected Version)

## 1. ØªØ³Øª Ø³Ù„Ø§Ù…Øª Ø³Ø±ÙˆÛŒØ³ (Health Check)
Invoke-RestMethod -Uri "http://localhost:57546/health" -Method GET

## 2. ØªØ³Øª Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ù…Ø¹ØªØ¨Ø± (Ø¨Ø§ Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ ØµØ­ÛŒØ­ property Ù‡Ø§)
$validNotification = @{
    tradeId = "123e4567-e89b-12d3-a456-426614174000"
    buyOrderId = "223e4567-e89b-12d3-a456-426614174000"
    buyerUserId = "123e4567-e89b-12d3-a456-426614174001"
    sellOrderId = "323e4567-e89b-12d3-a456-426614174000"
    sellerUserId = "123e4567-e89b-12d3-a456-426614174002"
    asset = "USDT"
    price = 50000.0
    matchedVolume = 100.5
    tradeDateTime = "2024-01-15T10:30:00"
    buyOrderCompletionPercentage = 75.0
    buyOrderRemainingPercentage = 25.0
    sellOrderCompletionPercentage = 100.0
    sellOrderRemainingPercentage = 0.0
    buyOrderTotalVolume = 134.0
    buyOrderRemainingVolume = 33.5
    sellOrderTotalVolume = 100.5
    sellOrderRemainingVolume = 0.0
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:57546/api/telegram/notifications/trade-match" -Method POST -Body $validNotification -ContentType "application/json"

## 3. ØªØ³Øª Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± - Ø­Ø¬Ù… ØµÙØ±
$invalidVolumeNotification = @{
    tradeId = "123e4567-e89b-12d3-a456-426614174000"
    buyOrderId = "223e4567-e89b-12d3-a456-426614174000"
    buyerUserId = "123e4567-e89b-12d3-a456-426614174001"
    sellOrderId = "323e4567-e89b-12d3-a456-426614174000"
    sellerUserId = "123e4567-e89b-12d3-a456-426614174002"
    asset = "USDT"
    price = 50000.0
    matchedVolume = 0
    tradeDateTime = "2024-01-15T10:30:00"
    buyOrderCompletionPercentage = 75.0
    buyOrderRemainingPercentage = 25.0
    sellOrderCompletionPercentage = 100.0
    sellOrderRemainingPercentage = 0.0
    buyOrderTotalVolume = 134.0
    buyOrderRemainingVolume = 33.5
    sellOrderTotalVolume = 100.5
    sellOrderRemainingVolume = 0.0
} | ConvertTo-Json

try {
    Invoke-RestMethod -Uri "http://localhost:57546/api/telegram/notifications/trade-match" -Method POST -Body $invalidVolumeNotification -ContentType "application/json"
    Write-Host "âŒ Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ù‚Ø¨ÙˆÙ„ Ø´Ø¯!" -ForegroundColor Red
} catch {
    Write-Host "âœ… Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø±Ø¯ Ø´Ø¯" -ForegroundColor Green
    Write-Host "ğŸ“ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§: $($_.ErrorDetails.Message)" -ForegroundColor Yellow
}

## 4. ØªØ³Øª Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± - Ù‚ÛŒÙ…Øª Ù…Ù†ÙÛŒ
$invalidPriceNotification = @{
    tradeId = "123e4567-e89b-12d3-a456-426614174000"
    buyOrderId = "223e4567-e89b-12d3-a456-426614174000"
    buyerUserId = "123e4567-e89b-12d3-a456-426614174001"
    sellOrderId = "323e4567-e89b-12d3-a456-426614174000"
    sellerUserId = "123e4567-e89b-12d3-a456-426614174002"
    asset = "USDT"
    price = -1000
    matchedVolume = 100.5
    tradeDateTime = "2024-01-15T10:30:00"
    buyOrderCompletionPercentage = 75.0
    buyOrderRemainingPercentage = 25.0
    sellOrderCompletionPercentage = 100.0
    sellOrderRemainingPercentage = 0.0
    buyOrderTotalVolume = 134.0
    buyOrderRemainingVolume = 33.5
    sellOrderTotalVolume = 100.5
    sellOrderRemainingVolume = 0.0
} | ConvertTo-Json

try {
    Invoke-RestMethod -Uri "http://localhost:57546/api/telegram/notifications/trade-match" -Method POST -Body $invalidPriceNotification -ContentType "application/json"
    Write-Host "âŒ Ù‚ÛŒÙ…Øª Ù…Ù†ÙÛŒ Ù‚Ø¨ÙˆÙ„ Ø´Ø¯!" -ForegroundColor Red
} catch {
    Write-Host "âœ… Ù‚ÛŒÙ…Øª Ù…Ù†ÙÛŒ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø±Ø¯ Ø´Ø¯" -ForegroundColor Green
    Write-Host "ğŸ“ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§: $($_.ErrorDetails.Message)" -ForegroundColor Yellow
}

## 5. ØªØ³Øª Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± - Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø®Ø§Ù„ÛŒ
$invalidUserIdNotification = @{
    tradeId = "123e4567-e89b-12d3-a456-426614174000"
    buyOrderId = "223e4567-e89b-12d3-a456-426614174000"
    buyerUserId = "00000000-0000-0000-0000-000000000000"
    sellOrderId = "323e4567-e89b-12d3-a456-426614174000"
    sellerUserId = "00000000-0000-0000-0000-000000000000"
    asset = "USDT"
    price = 50000.0
    matchedVolume = 100.5
    tradeDateTime = "2024-01-15T10:30:00"
    buyOrderCompletionPercentage = 75.0
    buyOrderRemainingPercentage = 25.0
    sellOrderCompletionPercentage = 100.0
    sellOrderRemainingPercentage = 0.0
    buyOrderTotalVolume = 134.0
    buyOrderRemainingVolume = 33.5
    sellOrderTotalVolume = 100.5
    sellOrderRemainingVolume = 0.0
} | ConvertTo-Json

try {
    Invoke-RestMethod -Uri "http://localhost:57546/api/telegram/notifications/trade-match" -Method POST -Body $invalidUserIdNotification -ContentType "application/json"
    Write-Host "âŒ Ø´Ù†Ø§Ø³Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ Ù‚Ø¨ÙˆÙ„ Ø´Ø¯!" -ForegroundColor Red
} catch {
    Write-Host "âœ… Ø´Ù†Ø§Ø³Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø±Ø¯ Ø´Ø¯" -ForegroundColor Green
    Write-Host "ğŸ“ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§: $($_.ErrorDetails.Message)" -ForegroundColor Yellow
}

## 6. ØªØ³Øª Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± - Asset Ø®Ø§Ù„ÛŒ
$emptyAssetNotification = @{
    tradeId = "123e4567-e89b-12d3-a456-426614174000"
    buyOrderId = "223e4567-e89b-12d3-a456-426614174000"
    buyerUserId = "123e4567-e89b-12d3-a456-426614174001"
    sellOrderId = "323e4567-e89b-12d3-a456-426614174000"
    sellerUserId = "123e4567-e89b-12d3-a456-426614174002"
    asset = ""
    price = 50000.0
    matchedVolume = 100.5
    tradeDateTime = "2024-01-15T10:30:00"
    buyOrderCompletionPercentage = 75.0
    buyOrderRemainingPercentage = 25.0
    sellOrderCompletionPercentage = 100.0
    sellOrderRemainingPercentage = 0.0
    buyOrderTotalVolume = 134.0
    buyOrderRemainingVolume = 33.5
    sellOrderTotalVolume = 100.5
    sellOrderRemainingVolume = 0.0
} | ConvertTo-Json

try {
    Invoke-RestMethod -Uri "http://localhost:57546/api/telegram/notifications/trade-match" -Method POST -Body $emptyAssetNotification -ContentType "application/json"
    Write-Host "âŒ Asset Ø®Ø§Ù„ÛŒ Ù‚Ø¨ÙˆÙ„ Ø´Ø¯!" -ForegroundColor Red
} catch {
    Write-Host "âœ… Asset Ø®Ø§Ù„ÛŒ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø±Ø¯ Ø´Ø¯" -ForegroundColor Green
    Write-Host "ğŸ“ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§: $($_.ErrorDetails.Message)" -ForegroundColor Yellow
}

## 7. ØªØ³Øª Ø¨Ø§ Ø¯Ø§Ø¯Ù‡ Ø®Ø§Ù„ÛŒ
$emptyNotification = "{}"

try {
    Invoke-RestMethod -Uri "http://localhost:57546/api/telegram/notifications/trade-match" -Method POST -Body $emptyNotification -ContentType "application/json"
    Write-Host "âŒ Ø¯Ø§Ø¯Ù‡ Ø®Ø§Ù„ÛŒ Ù‚Ø¨ÙˆÙ„ Ø´Ø¯!" -ForegroundColor Red
} catch {
    Write-Host "âœ… Ø¯Ø§Ø¯Ù‡ Ø®Ø§Ù„ÛŒ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø±Ø¯ Ø´Ø¯" -ForegroundColor Green
    Write-Host "ğŸ“ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§: $($_.ErrorDetails.Message)" -ForegroundColor Yellow
}

## 8. ØªØ³Øª Ø¨Ø§ Ù…ØªØ¯ Ù†Ø§Ù…Ø¹ØªØ¨Ø± (GET Ø¨Ù‡ Ø¬Ø§ÛŒ POST)
try {
    Invoke-RestMethod -Uri "http://localhost:57546/api/telegram/notifications/trade-match" -Method GET
    Write-Host "âŒ Ù…ØªØ¯ GET Ù‚Ø¨ÙˆÙ„ Ø´Ø¯!" -ForegroundColor Red
} catch {
    Write-Host "âœ… Ù…ØªØ¯ GET Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø±Ø¯ Ø´Ø¯" -ForegroundColor Green
    Write-Host "ğŸ“ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§: HTTP 405 Method Not Allowed" -ForegroundColor Yellow
}

## Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡:

## 9. ØªØ³Øª Ø¨Ø§ Ø­Ø¬Ù…â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù (BTC)
$btcNotification = @{
    tradeId = [System.Guid]::NewGuid().ToString()
    buyOrderId = [System.Guid]::NewGuid().ToString()
    buyerUserId = [System.Guid]::NewGuid().ToString()
    sellOrderId = [System.Guid]::NewGuid().ToString()
    sellerUserId = [System.Guid]::NewGuid().ToString()
    asset = "BTC"
    price = 1000000.0
    matchedVolume = 0.001
    tradeDateTime = "2024-01-15T15:45:30"
    buyOrderCompletionPercentage = 100.0
    buyOrderRemainingPercentage = 0.0
    sellOrderCompletionPercentage = 100.0
    sellOrderRemainingPercentage = 0.0
    buyOrderTotalVolume = 0.001
    buyOrderRemainingVolume = 0.0
    sellOrderTotalVolume = 0.001
    sellOrderRemainingVolume = 0.0
} | ConvertTo-Json

Write-Host "ğŸª™ ØªØ³Øª Ù…Ø¹Ø§Ù…Ù„Ù‡ BTC..." -ForegroundColor Yellow
$btcResponse = Invoke-RestMethod -Uri "http://localhost:57546/api/telegram/notifications/trade-match" -Method POST -Body $btcNotification -ContentType "application/json"
Write-Host "âœ… Ù¾Ø§Ø³Ø®: $($btcResponse.message)" -ForegroundColor Green

## 10. ØªØ³Øª ØªØ·Ø¨ÛŒÙ‚ Ø¬Ø²Ø¦ÛŒ
$partialMatchNotification = @{
    tradeId = [System.Guid]::NewGuid().ToString()
    buyOrderId = [System.Guid]::NewGuid().ToString()
    buyerUserId = [System.Guid]::NewGuid().ToString()
    sellOrderId = [System.Guid]::NewGuid().ToString()
    sellerUserId = [System.Guid]::NewGuid().ToString()
    asset = "USDT"
    price = 75500.0
    matchedVolume = 50.25
    tradeDateTime = "2024-01-15T20:15:45"
    buyOrderCompletionPercentage = 25.0
    buyOrderRemainingPercentage = 75.0
    sellOrderCompletionPercentage = 100.0
    sellOrderRemainingPercentage = 0.0
    buyOrderTotalVolume = 201.0
    buyOrderRemainingVolume = 150.75
    sellOrderTotalVolume = 50.25
    sellOrderRemainingVolume = 0.0
} | ConvertTo-Json

Write-Host "ğŸ”„ ØªØ³Øª ØªØ·Ø¨ÛŒÙ‚ Ø¬Ø²Ø¦ÛŒ..." -ForegroundColor Yellow
$partialResponse = Invoke-RestMethod -Uri "http://localhost:57546/api/telegram/notifications/trade-match" -Method POST -Body $partialMatchNotification -ContentType "application/json"
Write-Host "âœ… Ù¾Ø§Ø³Ø®: $($partialResponse.message)" -ForegroundColor Green

## 11. ØªØ³Øª Ø´Ù†Ø§Ø³Ù‡â€ŒÙ‡Ø§ÛŒ ØªØµØ§Ø¯ÙÛŒ
Write-Host "`nğŸ² ØªØ³Øª Ø¨Ø§ Ø´Ù†Ø§Ø³Ù‡â€ŒÙ‡Ø§ÛŒ ØªØµØ§Ø¯ÙÛŒ..." -ForegroundColor Cyan
$volume = Get-Random -Minimum 10 -Maximum 1000
$completion = Get-Random -Minimum 50 -Maximum 100
$randomNotification = @{
    tradeId = [System.Guid]::NewGuid().ToString()
    buyOrderId = [System.Guid]::NewGuid().ToString()
    buyerUserId = [System.Guid]::NewGuid().ToString()
    sellOrderId = [System.Guid]::NewGuid().ToString()
    sellerUserId = [System.Guid]::NewGuid().ToString()
    asset = "USDT"
    price = Get-Random -Minimum 40000 -Maximum 80000
    matchedVolume = $volume
    tradeDateTime = (Get-Date).ToString("yyyy-MM-ddTHH:mm:ss")
    buyOrderCompletionPercentage = $completion
    buyOrderRemainingPercentage = 100 - $completion
    sellOrderCompletionPercentage = 100.0
    sellOrderRemainingPercentage = 0.0
    buyOrderTotalVolume = $volume * 2
    buyOrderRemainingVolume = $volume * (100 - $completion) / 100
    sellOrderTotalVolume = $volume
    sellOrderRemainingVolume = 0.0
} | ConvertTo-Json

try {
    $randomResponse = Invoke-RestMethod -Uri "http://localhost:57546/api/telegram/notifications/trade-match" -Method POST -Body $randomNotification -ContentType "application/json"
    Write-Host "âœ… ØªØ³Øª ØªØµØ§Ø¯ÙÛŒ Ù…ÙˆÙÙ‚: $($randomResponse.message)" -ForegroundColor Green
} catch {
    Write-Host "âŒ Ø®Ø·Ø§ Ø¯Ø± ØªØ³Øª ØªØµØ§Ø¯ÙÛŒ: $($_.ErrorDetails.Message)" -ForegroundColor Red
}

## 12. ØªØ³Øª Ú©Ø§Ù…Ù„ Ø¨Ø§ Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬
Write-Host "`nğŸ“Š Ø®Ù„Ø§ØµÙ‡ ØªØ³Øªâ€ŒÙ‡Ø§:" -ForegroundColor Magenta
Write-Host "âœ… Health Check" -ForegroundColor Green
Write-Host "âœ… Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ù…Ø¹ØªØ¨Ø±" -ForegroundColor Green  
Write-Host "âœ… Validation Ø®Ø·Ø§Ù‡Ø§" -ForegroundColor Green
Write-Host "âœ… ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡" -ForegroundColor Green
Write-Host "`nğŸ‰ Ù‡Ù…Ù‡ ØªØ³Øªâ€ŒÙ‡Ø§ Ú©Ø§Ù…Ù„ Ø´Ø¯!" -ForegroundColor Green

# Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…: Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ Property Ø¯Ø± DTO Ø¨Ø§ÛŒØ¯ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø¨Ø§ JSON Ø§Ø±Ø³Ø§Ù„ÛŒ Ù…Ø·Ø§Ø¨Ù‚Øª Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯
# Property Names in TradeMatchNotificationDto:
# - tradeId (Guid)
# - buyOrderId (Guid)  
# - buyerUserId (Guid)
# - sellOrderId (Guid)
# - sellerUserId (Guid)
# - asset (string)
# - price (decimal)
# - matchedVolume (decimal)
# - tradeDateTime (DateTime)
# - buyOrderCompletionPercentage (decimal)
# - buyOrderRemainingPercentage (decimal)
# - sellOrderCompletionPercentage (decimal)
# - sellOrderRemainingPercentage (decimal)
# - buyOrderTotalVolume (decimal)
# - buyOrderRemainingVolume (decimal)
# - sellOrderTotalVolume (decimal)
# - sellOrderRemainingVolume (decimal)
