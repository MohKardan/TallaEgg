# Changelog - TallaEgg Trading Bot

## 🆕 نسخه 2.0.0 - Clean Architecture + Features

### ✨ ویژگی‌های جدید

#### 🔐 سیستم مدیریت کاربران
- ✅ **کاربر Root**: مدیر سیستم با دسترسی کامل
- ✅ **کاربر Admin**: مدیر با دسترسی محدود
- ✅ **کاربر User**: کاربر عادی
- ✅ **کدهای دعوت**: سیستم تولید و مدیریت کدهای دعوت

#### 📋 مدیریت سفارشات
- ✅ **لغو سفارش**: کاربران می‌توانند سفارشات خود را لغو کنند
- ✅ **بررسی سفارشات باز**: سیستم قبل از ایجاد سفارش جدید بررسی می‌کند
- ✅ **تایید لغو**: درخواست تایید برای لغو سفارشات قبلی
- ✅ **فقط Admin**: فعلاً فقط مدیران می‌توانند سفارش ثبت کنند

#### 🎯 منوهای جدید ربات
- ✅ **منوی اصلی**: نقدی، آتی، حسابداری، راهنما، کیف پول، تاریخچه
- ✅ **منوی کیف پول**: موجودی، واریز، برداشت، تراکنشات
- ✅ **منوی تاریخچه**: سفارشات، معاملات، تراکنشات، گزارش

#### 💰 جریان معاملات
- ✅ **نمایش قیمت**: آخرین قیمت خرید و فروش
- ✅ **دکمه‌های خرید/فروش**: انتخاب نوع معامله
- ✅ **ورود تعداد**: کاربر تعداد واحد را وارد می‌کند
- ✅ **تایید نهایی**: نمایش جزئیات و تایید معامله
- ✅ **بررسی سفارشات باز**: هشدار در صورت وجود سفارشات باز

### 🏗️ تغییرات معماری

#### Clean Architecture
- ✅ **Core Layer**: مدل‌ها و interface ها
- ✅ **Application Layer**: سرویس‌های کسب‌وکار
- ✅ **Infrastructure Layer**: پیاده‌سازی و API Client ها

#### مدل‌های جدید
- ✅ **UserRole**: Root, Admin, User
- ✅ **Order Cancellation**: اطلاعات لغو سفارش
- ✅ **Invitation Codes**: سیستم کدهای دعوت

### 🔧 بهبودها

#### کد
- ✅ **جداسازی مسئولیت‌ها**: هر لایه وظیفه خاص خود را دارد
- ✅ **قابلیت تست**: سرویس‌ها قابل mock کردن
- ✅ **انعطاف‌پذیری**: تغییر تکنولوژی بدون تأثیر بر منطق
- ✅ **نگهداری آسان**: کد تمیز و قابل فهم

#### عملکرد
- ✅ **بررسی سفارشات**: جلوگیری از سفارشات تکراری
- ✅ **مدیریت خطا**: پیام‌های خطای مناسب
- ✅ **UX بهتر**: منوهای کاربرپسند

### 📋 کدهای دعوت

#### کد Root:
```
ROOT2024
```

#### فرمت کدهای جدید:
```
INV + تاریخ + عدد تصادفی
مثال: INV202412011234
```

### 🎯 مراحل بعدی

1. **اتصال به API های واقعی**
2. **پیاده‌سازی سیستم پرداخت**
3. **اضافه کردن تست‌ها**
4. **بهینه‌سازی عملکرد**
5. **اضافه کردن گزارش‌گیری**

### 🚀 نحوه استفاده

#### ایجاد کاربر Root:
```
/start ROOT2024
```

#### منوهای ربات:
- 💰 **نقدی**: معاملات نقدی (فعال)
- 📈 **آتی**: معاملات آتی (غیرفعال)
- 📊 **حسابداری**: موجودی و گزارشات
- ❓ **راهنما**: راهنمای استفاده
- 💳 **کیف پول**: مدیریت کیف پول
- 📋 **تاریخچه**: مشاهده تاریخچه

### 🔒 امنیت

- ✅ **نقش‌های کاربری**: دسترسی بر اساس نقش
- ✅ **کدهای دعوت**: کنترل دسترسی
- ✅ **لغو سفارش**: فقط سفارشات خود کاربر
- ✅ **تایید معاملات**: جلوگیری از خطاهای کاربر 